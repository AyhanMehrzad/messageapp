"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[861],{861:(e,s,a)=>{a.r(s),a.d(s,{default:()=>n});var i=a(43),r=a(579);const n=e=>{let{onComplete:s}=e;const[a,n]=(0,i.useState)(!1);(0,i.useEffect)(()=>{localStorage.getItem("permissions_granted_v2")?s():n(!0)},[s]);return a?(0,r.jsx)("div",{className:"permission-overlay",children:(0,r.jsxs)("div",{className:"permission-modal",children:[(0,r.jsx)("h2",{className:"perm-title",children:"Permissions Required"}),(0,r.jsx)("p",{className:"perm-desc",children:"To enable secure calls and file sharing, the app needs access to your device's camera, microphone, and notification services."}),(0,r.jsxs)("div",{className:"perm-list",children:[(0,r.jsxs)("div",{className:"perm-item",children:[(0,r.jsx)("div",{className:"perm-icon",children:"\ud83d\udcf7"}),(0,r.jsxs)("div",{className:"perm-info",children:[(0,r.jsx)("span",{className:"perm-name",children:"Camera Access"}),(0,r.jsx)("span",{className:"perm-detail",children:"For making secure video calls and sending photos."})]})]}),(0,r.jsxs)("div",{className:"perm-item",children:[(0,r.jsx)("div",{className:"perm-icon",children:"\ud83c\udfa4"}),(0,r.jsxs)("div",{className:"perm-info",children:[(0,r.jsx)("span",{className:"perm-name",children:"Microphone Access"}),(0,r.jsx)("span",{className:"perm-detail",children:"For making secure voice and video calls."})]})]}),(0,r.jsxs)("div",{className:"perm-item",children:[(0,r.jsx)("div",{className:"perm-icon",children:"\ud83d\udd14"}),(0,r.jsxs)("div",{className:"perm-info",children:[(0,r.jsx)("span",{className:"perm-name",children:"Notifications"}),(0,r.jsx)("span",{className:"perm-detail",children:"To receive alerts when you get a secure message."})]})]})]}),(0,r.jsx)("button",{className:"btn-grant",onClick:async()=>{try{await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),"Notification"in window&&await Notification.requestPermission(),localStorage.setItem("permissions_granted_v2","true"),n(!1),s()}catch(e){console.error("Permission denied or error:",e),alert("Permissions are required to use this app. Please allow access when prompted.")}},children:"Grant Permissions"})]})}):null}}}]);
//# sourceMappingURL=861.6c4a453f.chunk.js.map