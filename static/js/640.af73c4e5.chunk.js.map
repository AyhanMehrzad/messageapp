{"version":3,"file":"static/js/640.af73c4e5.chunk.js","mappings":"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","sources":["components/MessageInput.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\n\nconst MessageInput = ({ onSend, onSocketAction }) => {\n    const [text, setText] = useState('');\n    const [isRecording, setIsRecording] = useState(false);\n    const [recordingType, setRecordingType] = useState(null); // 'audio' | 'video'\n    const [recordingTime, setRecordingTime] = useState(0);\n    const [isUploading, setIsUploading] = useState(false);\n    const [stream, setStream] = useState(null); // Keep track of stream for preview\n\n    const textareaRef = useRef(null);\n    const mediaRecorderRef = useRef(null);\n    const chunksRef = useRef([]);\n    const timerRef = useRef(null);\n    const fileInputRef = useRef(null);\n    const videoPreviewRef = useRef(null); // Self-view current video\n\n    // Auto-resize textarea\n    useEffect(() => {\n        if (textareaRef.current) {\n            textareaRef.current.style.height = 'auto';\n            textareaRef.current.style.height = textareaRef.current.style.scrollHeight + 'px';\n        }\n    }, [text]);\n\n    // Keep track of stream in ref for cleanup\n    const streamRef = useRef(null);\n\n    // Sync ref with state\n    useEffect(() => {\n        streamRef.current = stream;\n    }, [stream]);\n\n    // Clean up stream on unmount\n    useEffect(() => {\n        return () => {\n            if (streamRef.current) {\n                streamRef.current.getTracks().forEach(track => track.stop());\n            }\n        };\n    }, []);\n\n    // Watch for stream changes to attach to video element\n    useEffect(() => {\n        if (videoPreviewRef.current && stream) {\n            videoPreviewRef.current.srcObject = stream;\n        }\n    }, [stream, isRecording]);\n\n    const stopMediaStream = useCallback(() => {\n        if (stream) {\n            stream.getTracks().forEach(track => track.stop());\n            setStream(null);\n        }\n    }, [stream]);\n\n    const handleKeyDown = (e) => {\n        if (e.key === 'Enter' && !e.shiftKey) {\n            e.preventDefault();\n            handleSendText();\n        }\n    };\n\n    const handleSendText = () => {\n        if (text.trim()) {\n            onSend({ msg: text, type: 'text' });\n            setText('');\n            if (textareaRef.current) {\n                textareaRef.current.style.height = 'auto';\n                // Keep focus to prevent keyboard from closing on mobile\n                textareaRef.current.focus();\n            }\n        }\n    };\n\n    const startRecording = async (type) => {\n        try {\n            const constraints = type === 'video'\n                ? { video: true, audio: true }\n                : { audio: true };\n\n            const mediaStream = await navigator.mediaDevices.getUserMedia(constraints);\n            setStream(mediaStream); // Set state to trigger preview\n\n            const mediaRecorder = new MediaRecorder(mediaStream);\n            mediaRecorderRef.current = mediaRecorder;\n            chunksRef.current = [];\n\n            mediaRecorder.ondataavailable = (e) => {\n                if (e.data.size > 0) {\n                    chunksRef.current.push(e.data);\n                }\n            };\n\n            mediaRecorder.onstop = () => {\n                const blob = new Blob(chunksRef.current, { type: type === 'video' ? 'video/webm' : 'audio/webm' });\n                uploadFile(blob, type);\n                stopMediaStream();\n            };\n\n            mediaRecorder.start();\n            setIsRecording(true);\n            setRecordingType(type);\n            setRecordingTime(0);\n\n            timerRef.current = setInterval(() => {\n                setRecordingTime(prev => prev + 1);\n            }, 1000);\n\n        } catch (err) {\n            console.error(\"Error accessing media devices:\", err);\n            alert(\"Could not access camera/microphone. Please check permissions.\");\n        }\n    };\n\n    const stopRecording = () => {\n        if (mediaRecorderRef.current && isRecording) {\n            mediaRecorderRef.current.stop();\n            setIsRecording(false);\n            setRecordingType(null);\n            clearInterval(timerRef.current);\n        }\n    };\n\n    const cancelRecording = () => {\n        if (mediaRecorderRef.current && isRecording) {\n            mediaRecorderRef.current.onstop = null; // Prevent upload\n            mediaRecorderRef.current.stop();\n            stopMediaStream();\n            setIsRecording(false);\n            setRecordingType(null);\n            clearInterval(timerRef.current);\n        }\n    };\n\n    const handleFileUpload = (e) => {\n        const file = e.target.files[0];\n        if (file) {\n            let type = 'file';\n            if (file.type.startsWith('image/')) type = 'image';\n            else if (file.type.startsWith('video/')) type = 'video';\n            else if (file.type.startsWith('audio/')) type = 'audio';\n\n            uploadFile(file, type);\n        }\n    };\n\n    const uploadFile = async (fileBlob, type) => {\n        setIsUploading(true);\n        const formData = new FormData();\n        formData.append('file', fileBlob, type === 'audio' ? 'recording.webm' : (type === 'video' ? 'recording.webm' : fileBlob.name));\n\n        try {\n            const res = await fetch('/api/upload', {\n                method: 'POST',\n                body: formData\n            });\n            const data = await res.json();\n\n            if (data.url) {\n                onSend({ msg: data.url, type: type });\n            } else {\n                alert(\"Upload failed\");\n            }\n        } catch (err) {\n            console.error(\"Upload error:\", err);\n            alert(\"Upload error\");\n        } finally {\n            setIsUploading(false);\n        }\n    };\n\n    const formatTime = (seconds) => {\n        const mins = Math.floor(seconds / 60);\n        const secs = seconds % 60;\n        return `${mins}:${secs < 10 ? '0' : ''}${secs}`;\n    };\n\n    const handleEmojiClick = (emoji) => {\n        setText(prev => prev + emoji);\n    };\n\n    // --- RENDER ---\n\n    // Action Bar Handlers\n    const handleAction = (action) => {\n        if (onSocketAction) {\n            onSocketAction(action);\n        }\n    };\n\n    if (isRecording) {\n        return (\n            <div className=\"input-container recording-mode\">\n                {/* Self View for Video - Circular & Centered */}\n                {recordingType === 'video' && (\n                    <div className=\"video-preview-circle-container\">\n                        <video\n                            ref={videoPreviewRef}\n                            autoPlay\n                            muted\n                            playsInline\n                            className=\"video-preview-feed-circle\"\n                        />\n                    </div>\n                )}\n\n                <div className=\"recording-ui\">\n                    <div className=\"recording-indicator\">\n                        <div className=\"recording-dot\"></div>\n                        <span>{recordingType === 'audio' ? 'Recording Audio...' : 'Recording Video...'}</span>\n                    </div>\n                    <div className=\"recording-timer\">{formatTime(recordingTime)}</div>\n                    <div className=\"recording-actions\">\n                        <button className=\"btn-cancel\" onClick={cancelRecording}>Cancel</button>\n                        <button className=\"btn-stop\" onClick={stopRecording}>Stop & Send</button>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n    return (\n        <div className=\"input-stack\">\n            {/* Action Bar Pill */}\n            <div className=\"action-bar-pill\">\n                <button className=\"action-unit\" onClick={() => handleAction('clear')} title=\"Clear History\">\n                    <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><polyline points=\"3 6 5 6 21 6\"></polyline><path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path></svg>\n                </button>\n                <button className=\"action-unit\" onClick={() => handleAction('ping')} title=\"Ping User\">\n                    <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9\"></path><path d=\"M13.73 21a2 2 0 0 1-3.46 0\"></path></svg>\n                </button>\n                <button className=\"action-unit\" onClick={() => handleEmojiClick('ðŸ˜Š')} title=\"Emoji\">\n                    <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><path d=\"M8 14s1.5 2 4 2 4-2 4-2\"></path><line x1=\"9\" y1=\"9\" x2=\"9.01\" y2=\"9\"></line><line x1=\"15\" y1=\"9\" x2=\"15.01\" y2=\"9\"></line></svg>\n                </button>\n                <button className=\"action-unit\" onClick={() => handleAction('exit')} title=\"Exit App\">\n                    <svg viewBox=\"0 0 24 24\" width=\"20\" height=\"20\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><rect x=\"2\" y=\"7\" width=\"20\" height=\"15\" rx=\"2\" ry=\"2\"></rect><polyline points=\"17 2 12 7 7 2\"></polyline></svg>\n                </button>\n            </div>\n\n            {/* Input Pill */}\n            <div className=\"input-pill-container\">\n                {/* Upload Overlay */}\n                {isUploading && (\n                    <div className=\"upload-overlay\">\n                        <div className=\"loading-spinner small\"></div>\n                        <span>Uploading...</span>\n                    </div>\n                )}\n\n                <div className=\"input-pill-box\">\n                    {/* Attachment: Replaced Pin with simple Plus or Clip as requested (using Clip) */}\n                    <button className=\"pin-btn\" onClick={() => fileInputRef.current.click()}>\n                        ðŸ“Ž\n                    </button>\n                    <input type=\"file\" ref={fileInputRef} style={{ display: 'none' }} onChange={handleFileUpload} />\n\n                    <textarea\n                        ref={textareaRef}\n                        className=\"input-textarea\"\n                        value={text}\n                        onChange={(e) => setText(e.target.value)}\n                        onKeyDown={handleKeyDown}\n                        placeholder=\"Message...\"\n                        rows={1}\n                    />\n\n                    <div className=\"input-actions-right\">\n                        {text.trim() ? (\n                            <button className=\"send-btn-icon\" onClick={handleSendText}>âž¤</button>\n                        ) : (\n                            <>\n                                <button className=\"media-btn\" onClick={() => startRecording('video')}>ðŸ“¹</button>\n                                <button className=\"media-btn\" onClick={() => startRecording('audio')}>ðŸŽ¤</button>\n                            </>\n                        )}\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default MessageInput;\n"],"names":["_ref","onSend","onSocketAction","text","setText","useState","isRecording","setIsRecording","recordingType","setRecordingType","recordingTime","setRecordingTime","isUploading","setIsUploading","stream","setStream","textareaRef","useRef","mediaRecorderRef","chunksRef","timerRef","fileInputRef","videoPreviewRef","useEffect","current","style","height","scrollHeight","streamRef","getTracks","forEach","track","stop","srcObject","stopMediaStream","useCallback","handleSendText","trim","msg","type","focus","startRecording","async","constraints","video","audio","mediaStream","navigator","mediaDevices","getUserMedia","mediaRecorder","MediaRecorder","ondataavailable","e","data","size","push","onstop","blob","Blob","uploadFile","start","setInterval","prev","err","console","error","alert","stopRecording","clearInterval","cancelRecording","fileBlob","formData","FormData","append","name","res","fetch","method","body","json","url","formatTime","seconds","mins","Math","floor","secs","concat","handleAction","action","_jsxs","className","children","_jsx","ref","autoPlay","muted","playsInline","onClick","title","viewBox","width","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","d","handleEmojiClick","emoji","cx","cy","r","x1","y1","x2","y2","x","y","rx","ry","click","display","onChange","file","target","files","startsWith","value","onKeyDown","key","shiftKey","preventDefault","placeholder","rows","_Fragment"],"ignoreList":[],"sourceRoot":""}