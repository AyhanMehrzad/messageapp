"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[587],{587:(e,s,t)=>{t.r(s),t.d(s,{default:()=>a});var l=t(43),r=t(579);const c=e=>{let{msg:s,user:t,setReplyTo:l}=e;const c=s.user===t;return(0,r.jsxs)("div",{className:"message ".concat(c?"me":"other"," ").concat(s.type),children:[s.reply_context&&(0,r.jsxs)("div",{className:"message-reply-context",onClick:()=>{},children:[(0,r.jsx)("div",{className:"reply-line"}),(0,r.jsxs)("div",{className:"reply-content",children:[(0,r.jsx)("div",{className:"reply-author",children:"Replying to message"}),(0,r.jsx)("div",{className:"reply-text",children:"text"===s.reply_context.type?s.reply_context.msg:"[".concat(s.reply_context.type,"]")})]})]}),(0,r.jsx)("div",{className:"msg-content-wrapper",children:(()=>{switch(s.type){case"image":return(0,r.jsx)("img",{src:s.msg,alt:"attachment",className:"msg-image"});case"video":return(0,r.jsx)("video",{src:s.msg,controls:!0,className:"msg-video"});case"audio":return(0,r.jsx)("audio",{src:s.msg,controls:!0,className:"msg-audio"});case"file":const t=s.msg.split("/").pop().split("_").slice(2).join("_");return(0,r.jsxs)("a",{href:s.msg,target:"_blank",rel:"noopener noreferrer",className:"msg-file",children:["\ud83d\udcc4 ",t||"Download File"]});default:const l=(e=s.msg,/[\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC]/.test(e)?"rtl":"ltr");return(0,r.jsx)("div",{className:"msg-text",style:{direction:l,textAlign:"rtl"===l?"right":"left"},children:s.msg})}var e})()}),(0,r.jsx)("div",{className:"msg-time",children:new Date(1e3*s.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),(0,r.jsx)("button",{className:"reply-btn",onClick:()=>l(s),title:"Reply",children:"\u21a9"})]})},a=e=>{let{messages:s,user:t,setReplyTo:a,onLoadMore:n}=e;const i=(0,l.useRef)(null),o=(0,l.useRef)(null),[m,d]=(0,l.useState)(!0),[u,g]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{m&&o.current&&o.current.scrollIntoView({behavior:"smooth"})},[s,m]),(0,r.jsxs)("div",{className:"chat-window",ref:i,onScroll:()=>{if(i.current){const{scrollTop:e,scrollHeight:t,clientHeight:l}=i.current;if(d(t-e-l<100),e<50&&!u&&s.length>0){g(!0);const e=s[0];e&&n&&n(e.timestamp).finally(()=>{g(!1)})}}},children:[u&&(0,r.jsx)("div",{className:"loading-history",children:"Loading history..."}),s.map((e,s)=>(0,r.jsx)(c,{msg:e,user:t,setReplyTo:a},e.id||"".concat(e.timestamp,"-").concat(s))),(0,r.jsx)("div",{ref:o,className:"chat-spacer"})]})}}}]);
//# sourceMappingURL=587.46d3319e.chunk.js.map